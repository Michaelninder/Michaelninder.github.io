<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MOTD XP-Craft.de</title>
    <style>
        @font-face {
            font-family: 'Minecraftia';
            src: url('fonts/Minecraftia.ttf') format('truetype');
        }

        body {
            font-family: 'Minecraftia', sans-serif;
            background-color: #1e1e1e;
            color: #ffffff;
            text-align: center;
            margin: 0;
            padding: 0;
        }

        #motd {
            display: inline-block;
            background-color: #1e1e1e; /* Gleicher Hintergrund wie die Seite */
            border: 2px solid #ffffff; /* Weißer Rand */
            border-radius: 10px;
            padding: 20px;
            font-size: 24px; /* Größere Schriftgröße */
            line-height: 1.5;
            text-align: left; /* Text linksbündig innerhalb des Kastens */
        }

        .motd-line {
            display: block;
            margin: 5px 0;
        }
    </style>
</head>
<body>
    <h1>XP-Craft.de</h1>
    <div id="motd">Lade...</div>

    <script>
        const colorCodes = {
            '0': '000000', '1': '0000AA', '2': '00AA00', '3': '00AAAA', 
            '4': 'AA0000', '5': 'AA00AA', '6': 'FFAA00', '7': 'AAAAAA', 
            '8': '555555', '9': '5555FF', 'a': '55FF55', 'b': '55FFFF', 
            'c': 'FF5555', 'd': 'FF55FF', 'e': 'FFFF55', 'f': 'FFFFFF'
        };

        function parseMinecraftColorsAndStyles(text) {
            return text
                .replace(/§l/g, '<strong>') // Fett
                .replace(/§[0-9a-f]/g, match => {
                    const color = colorCodes[match[1]];
                    return `<span style="color:#${color}">`;
                })
                .replace(/§r/g, '</span></strong>') // Reset und Schließen von <strong>
                .replace(/<\/span><\/strong>$/, '</strong>'); // Falls kein Farbstil nach dem letzten <strong>
        }

        async function fetchServerMotd(serverIp) {
            const response = await fetch(`https://api.mcsrvstat.us/2/${serverIp}`);
            const data = await response.json();
            return data.motd.raw;
        }

        function displayMotd(motd) {
            const motdContainer = document.getElementById('motd');
            motdContainer.innerHTML = motd.map(line => {
                return `<span class="motd-line">${parseMinecraftColorsAndStyles(line)}</span>`;
            }).join('<br>');
        }

        const serverIp = 'mc.xp-craft.de';
        fetchServerMotd(serverIp).then(displayMotd).catch(error => {
            console.error('Fehler beim Abrufen der MotD:', error);
            document.getElementById('motd').innerText = 'Fehler beim Laden der MotD.';
        });
    </script>
</body>
</html>
